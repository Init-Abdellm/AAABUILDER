@agent multi-provider-demo v1
trigger http POST /multi
secret OLLAMA_URL=env:OLLAMA_URL
var topic = input.topic
var max_length = input.max_length

step research:
  kind llm
  model deepseek
  provider ollama
  prompt """
    Research the topic: {topic}
    Provide 3 key insights in a structured format.
    Be comprehensive but concise.
  """
  retries 2
  timeout_ms 45000
  save research_data

step summarize:
  kind llm
  model qwen2
  provider ollama
  when research_data
  prompt """
    Summarize this research in {max_length} words or less:
    {research_data}
    
    Make it clear and actionable.
  """
  retries 2
  timeout_ms 60000
  save summary

step notify:
  kind http
  action: POST
  url: https://httpbin.org/post
  headers: {"Content-Type": "application/json", "User-Agent": "AAAB/1.0"}
  retries: 1
  timeout_ms: 10000
  save: notification_result

output summary
@end
